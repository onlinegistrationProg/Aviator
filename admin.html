<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aviator Admin</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0D0D0F;color:#fff;}
header{padding:10px;background:#111;color:#ff0033;text-align:center;}
.container{padding:20px;}
input,button{padding:10px;margin:5px;border-radius:5px;border:none;}
button{cursor:pointer;}
#userTable{width:100%; border-collapse: collapse; margin-top:20px;}
#userTable th, #userTable td{border:1px solid #444; padding:5px;text-align:center;}
</style>
</head>
<body>
<header><h1>Aviator Admin Panel</h1></header>
<div class="container">
<h3>Login</h3>
<input type="text" id="adminUser" placeholder="Admin Username"><br>
<input type="password" id="adminPass" placeholder="Admin Password"><br>
<button id="adminLogin">Login</button>
<p id="adminMessage" style="color:#ff0033;"></p>

<div id="adminControls" style="display:none;">
<h3>Auto-Changing Admin Code (60s)</h3>
<p id="adminCode" style="font-size:20px;color:#0f0;"></p>

<h3>Next Round Outcome Preview</h3>
<p id="nextOutcome">-</p>

<h3>Manage Users</h3>
<table id="userTable">
<tr><th>Username</th><th>Balance</th><th>Frozen</th><th>Actions</th></tr>
</table>
</div>
</div>

<script>
const ADMIN_USERNAME='admin';
const ADMIN_PASSWORD='rk1234';
let adminCode='';
const adminLogin=document.getElementById('adminLogin');
const adminMessage=document.getElementById('adminMessage');
const adminControls=document.getElementById('adminControls');
const adminCodeDisplay=document.getElementById('adminCode');
const nextOutcomeDisplay=document.getElementById('nextOutcome');
let users = JSON.parse(localStorage.getItem('aviatorUsers'))||{};

function generateAdminCode(){
  adminCode=Math.random().toString(36).substr(2,6).toUpperCase();
  adminCodeDisplay.textContent=adminCode;
  localStorage.setItem('adminCode', adminCode);
}

function generateNextOutcome(){
  let rand=Math.random()*100;
  let outcome;
  if(rand<40) outcome=(1.0 + Math.random()*0.5).toFixed(2);
  else if(rand<75) outcome=(1.5 + Math.random()*1.5).toFixed(2);
  else if(rand<95) outcome=(3 + Math.random()*7).toFixed(2);
  else outcome=(10 + Math.random()*40).toFixed(2);
  nextOutcomeDisplay.textContent=outcome+'x';
}

function refreshTable(){
  users = JSON.parse(localStorage.getItem('aviatorUsers'))||{};
  const table = document.getElementById('userTable');
  table.innerHTML='<tr><th>Username</th><th>Balance</th><th>Frozen</th><th>Actions</th></tr>';
  Object.keys(users).forEach(u=>{
    let row=table.insertRow();
    row.insertCell(0).textContent=u;
    row.insertCell(1).textContent=users[u].balance;
    row.insertCell(2).textContent=users[u].frozen;
    let actions=row.insertCell(3);
    let resetBtn=document.createElement('button');
    resetBtn.textContent='Reset Password';
    resetBtn.onclick=()=>{
      let newPass=prompt('New password for '+u);
      if(newPass){users[u].password=newPass; localStorage.setItem('aviatorUsers',JSON.stringify(users)); refreshTable();}
    };
    let freezeBtn=document.createElement('button');
    freezeBtn.textContent=users[u].frozen?'Unfreeze':'Freeze';
    freezeBtn.onclick=()=>{
      users[u].frozen=!users[u].frozen; localStorage.setItem('aviatorUsers',JSON.stringify(users)); refreshTable();
    };
    actions.appendChild(resetBtn);
    actions.appendChild(freezeBtn);
  });
}

adminLogin.addEventListener('click',()=>{
  const u=document.getElementById('adminUser').value;
  const p=document.getElementById('adminPass').value;
  if(u===ADMIN_USERNAME && p===ADMIN_PASSWORD){
    adminControls.style.display='block';
    adminMessage.textContent='';
    generateAdminCode();
    generateNextOutcome();
    refreshTable();
    setInterval(generateAdminCode,60000);
    setInterval(generateNextOutcome,60000);
  } else {
    adminMessage.textContent='Wrong credentials';
  }
});
</script>
</body>
</html>
